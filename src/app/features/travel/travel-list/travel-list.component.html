<div class="travel-list-container">
  <h1 class="page-title">Mes voyages</h1>

  @if (isBrowser) {
    @if ((travels$ | async)?.length) {
      <div class="travel-grid">
        @for (travel of (travels$ | async); track travel.id) {
          <mat-card class="travel-card" [routerLink]="['/travels', travel.id]">
            @if(travel.coverPicture !== null) {
              <div class="mat-card-image-container">
              <picture appImageLoader>
                <!-- Desktop sizes -->
                <source
                  [srcset]="getSrcSet(travel.coverPicture, 'desktop')"
                  media="(min-width: 1025px)"
                  type="image/webp">

                <!-- Tablet sizes -->
                <source
                  [srcset]="getSrcSet(travel.coverPicture, 'tablet')"
                  media="(min-width: 641px) and (max-width: 1024px)"
                  type="image/webp">

                <!-- Mobile sizes -->
                <source
                  [srcset]="getSrcSet(travel.coverPicture, 'mobile')"
                  media="(max-width: 640px)"
                  type="image/webp">

                <!-- Fallback image -->
                <img
                  [src]="getImageUrl(travel.coverPicture)"
                  loading="lazy"
                  alt="Photo de couverture du voyage"
                  class="gallery-image">
              </picture>
              </div>
            }
            <mat-card-content>
              <h2>{{ travel.name }}</h2>
              <p class="date-range">
                {{ travel.startDate | date:'dd MMM yyyy' }}
                <span *ngIf="travel.endDate"> - {{ travel.endDate | date:'dd MMM yyyy' }}</span>
              </p>
              <p class="description">{{ travel.description }}</p>
            </mat-card-content>
            <mat-card-actions>
              <button mat-button color="primary">EXPLORER</button>
            </mat-card-actions>
          </mat-card>
        }
      </div>
    } @else {
      <div class="no-travels">
        <mat-icon class="no-travels-icon">hiking</mat-icon>
        <p>Aucun voyage Ã  afficher pour le moment.</p>
      </div>
    }
  } @else {
    <div class="loading-container">
      <p>Chargement des voyages...</p>
    </div>
  }
</div>
